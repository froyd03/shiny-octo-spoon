<!DOCTYPE html>
<html lang="en">
<head>
    <title>Homeowner Management</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div>
        <h2>Homeowner Management</h2>
        <form id="homeownerForm">
            <label for="lastName">Last name</label>
            <input type="text" id="lastName" required><br>

            <label for="middleName">Middle name (optional)</label>
            <input type="text" id="middleName"><br>

            <label for="firstName">First name</label>
            <input type="text" id="firstName"><br>
            
            <label for="contactInfo">Contact Information</label>
            <input type="text" id="contactInfo" placeholder="Phone number or Email address" required><br>
            
            <label for="address">Address</label>
            <input type="text" id="address" placeholder="House/Lot number, Street" required><br>
            
            <div class="selection">
                <label for="method">Payment Method:
                    <select id="paymentMethod">
                        <option value="Cash">Cash</option>
                        <option value="Gcash">Gcash</option>
                        <option value="Maya">Maya</option>
                        <option value="Paypal">Paypal</option>
                    </select>
                </label>
                <label for="method">Payment Status:
                    <select id="paymentStatus">
                        <option value="Active">Active</option>
                        <option value="Deliquent">Deliquent</option>
                    </select>
                </label>
            </div>
            
            <button type="submit">Add Homeowner</button>
        </form>
    </div>
    <div class="homeownerList">
        <div class="headerTblList">
            <h3>Homeowners List</h3>
            <div class="btn">
                <button> New</button>
                <button class="filter">filter</button>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Contact</th>
                    <th>Address</th>
                    <th>Payment Method</th>
                    <th>Payment Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="homeownersTableBody">
                <tr>
                    <td>Grace Cruz</td>
                    <td>09112233445</td>
                    <td>Blk5 Lot14 Rose st.</td>
                    <td>Cash</td>
                    <td>Active</td>
                </tr>
                <tr>
                    <td>Joe Doe</td>
                    <td>09554433221</td>
                    <td>Blk17 Lot2 Santan st.</td>
                    <td>Maya</td>
                    <td>Deliquent</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("homeownerForm");
    const tableBody = document.getElementById("homeownersTableBody");

    form.addEventListener("submit", function (e) {
        e.preventDefault(); // Prevent form submission

        const lastName = document.getElementById("lastName").value.trim();
        const middleName = document.getElementById("middleName").value.trim();
        const firstName = document.getElementById("firstName").value.trim();
        const contact = document.getElementById("contactInfo").value.trim();
        const address = document.getElementById("address").value.trim();
        const paymentMethod = document.getElementById("paymentMethod").value;
        const paymentStatus = document.getElementById("paymentStatus").value;

        if (!firstName || !lastName || !contact || !address) {
            alert("Please fill in all required fields.");
            return;
        }

        const fullName = `${firstName} ${middleName ? middleName + " " : ""}${lastName}`;

        addHomeowner(fullName, contact, address, paymentMethod, paymentStatus);
        form.reset(); // Clear form after adding
    });

    function addHomeowner(name, contact, address, paymentMethod, paymentStatus) {
        const row = document.createElement("tr");
        
        row.innerHTML = `
            <td>${name}</td>
            <td>${contact}</td>
            <td>${address}</td>
            <td>${paymentMethod}</td>
            <td>${paymentStatus}</td>
            <td class="actions">
                <button class="edit-btn"> Edit</button>
                <button class="delete-btn"> Delete</button>
            </td>
        `;

        tableBody.appendChild(row);

        // Attach event listeners
        row.querySelector(".edit-btn").addEventListener("click", function () {
            editHomeowner(row);
        });

        row.querySelector(".delete-btn").addEventListener("click", function () {
            deleteHomeowner(row);
        });
    }

    function editHomeowner(row) {
        const cells = row.getElementsByTagName("td");

        document.getElementById("firstName").value = cells[0].textContent.split(" ")[0];
        document.getElementById("lastName").value = cells[0].textContent.split(" ").slice(-1)[0];
        document.getElementById("contactInfo").value = cells[1].textContent;
        document.getElementById("address").value = cells[2].textContent;
        document.getElementById("paymentMethod").value = cells[3].textContent;
        document.getElementById("paymentStatus").value = cells[4].textContent;

        row.remove();
    }

    function deleteHomeowner(row) {
        if (confirm("Are you sure you want to delete this homeowner?")) {
            row.remove();
        }
    }
});

    </script>
</body>
</html>
